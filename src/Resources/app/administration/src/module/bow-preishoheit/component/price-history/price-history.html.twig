{% block bow_preishoheit_price_history %}
    <div class="bow-preishoheit-price-history">
        <sw-card :title="$tc('bow-preishoheit.history.cardTitle')" :isLoading="isLoading">
            <template #toolbar>
                <div class="price-history__toolbar">
                    <sw-datepicker
                        v-model="dateRange.start"
                        :label="$tc('bow-preishoheit.history.startDate')"
                        :placeholder="$tc('bow-preishoheit.history.startDatePlaceholder')"
                        @change="onDateRangeChange">
                    </sw-datepicker>

                    <sw-datepicker
                        v-model="dateRange.end"
                        :label="$tc('bow-preishoheit.history.endDate')"
                        :placeholder="$tc('bow-preishoheit.history.endDatePlaceholder')"
                        @change="onDateRangeChange">
                    </sw-datepicker>

                    <sw-button-process
                        variant="primary"
                        :isLoading="isExporting"
                        @click="onExportClick">
                        {{ $tc('bow-preishoheit.history.export') }}
                    </sw-button-process>
                </div>
            </sw-card>

        <sw-modal
            v-if="showExportModal"
            :title="$tc('bow-preishoheit.history.exportTitle')"
            @modal-close="onCloseExportModal">

            <p>{{ $tc('bow-preishoheit.history.exportConfirm') }}</p>

            <template #modal-footer>
                <sw-button variant="ghost" @click="onCloseExportModal">
                    {{ $tc('global.default.cancel') }}
                </sw-button>

                <sw-button-process
                    variant="primary"
                    :isLoading="isExporting"
                    @click="onConfirmExport">
                    {{ $tc('bow-preishoheit.history.confirmExport') }}
                </sw-button-process>
            </template>
        </sw-modal>

        <sw-data-grid
            :dataSource="history"
            :columns="columns"
            :isLoading="isLoading"
            :showSettings="true"
            @sort-column="onSort"
            :sortBy="sortBy"
            :sortDirection="sortDirection"
            @page-change="onPageChange">

            <template #cell-newPrice="{ item }">
                <span :class="getPriceClass(item)">
                    {{ item.newPrice | currency }}
                </span>
            </template>

            <template #empty-state>
                <sw-empty-state
                    :title="$tc('bow-preishoheit.history.emptyTitle')"
                    :subtitle="$tc('bow-preishoheit.history.emptySubtitle')">
                </sw-empty-state>
            </template>

        </sw-data-grid>
    </div>
{% endblock %}
