{% block bow_preishoheit_bulk_edit %}
    <div class="bow-preishoheit-bulk-edit">
        <sw-card>
            <template #toolbar>
                <div class="bulk-edit-actions">
                    <sw-button
                        :disabled="!selectedItems.length"
                        variant="primary"
                        size="small"
                        @click="onBulkEditClick">
                        {{ $tc('bow-preishoheit.bulk.editSelected', selectedItems.length) }}
                    </sw-button>
                    <sw-button
                        :disabled="!selectedItems.length"
                        variant="danger"
                        size="small"
                        @click="onClearSelection">
                        {{ $tc('bow-preishoheit.bulk.clearSelection') }}
                    </sw-button>
                </div>
            </template>

            <sw-data-grid
                :dataSource="products"
                :columns="columns"
                :showSettings="true"
                :showSelection="true"
                :allowColumnSort="true"
                :isLoading="isLoading"
                @selection-change="onSelectionChange"
                @page-change="onPageChange"
                @sort-change="onSort">
                <template #column-price="{ item }">
                    {{ item.price | currency }}
                </template>
                <template #column-surchargePercentage="{ item }">
                    {{ item.surchargePercentage }}%
                </template>
            </sw-data-grid>
        </sw-card>

        <sw-modal
            v-if="showBulkEditModal"
            :title="$tc('bow-preishoheit.bulk.modalTitle')"
            @modal-close="onCloseBulkEditModal">
            <div v-if="isSaving" class="bulk-processing-status">
                <sw-progress-bar
                    :value="(processingStatus.processed / processingStatus.total) * 100"
                    :text="$tc('bow-preishoheit.bulk.processingStatus', 0, { 
                        processed: processingStatus.processed,
                        total: processingStatus.total,
                        success: processingStatus.success,
                        failed: processingStatus.failed
                    })">
                </sw-progress-bar>
            </div>
            <div v-else class="bulk-edit-form">
                <sw-select-field
                    v-model="bulkEditData.adjustmentType"
                    :label="$tc('bow-preishoheit.bulk.adjustmentType')"
                    :options="adjustmentTypeOptions">
                </sw-select-field>

                <sw-number-field
                    v-model="bulkEditData.value"
                    :label="$tc('bow-preishoheit.bulk.adjustmentValue')"
                    :min="0"
                    :max="100"
                    :digits="2">
                </sw-number-field>
            </div>

            <template #modal-footer>
                <div class="bulk-edit-footer">
                    <sw-button
                        size="small"
                        @click="onCloseBulkEditModal">
                        {{ $tc('bow-preishoheit.general.cancel') }}
                    </sw-button>
                    <sw-button
                        variant="primary"
                        size="small"
                        :disabled="!isValidBulkEdit"
                        :isLoading="isSaving"
                        @click="onSaveBulkEdit">
                        {{ $tc('bow-preishoheit.bulk.save') }}
                    </sw-button>
                </div>
            </template>
        </sw-modal>
    </div>
{% endblock %}
